# Memory-to-Memory Swap

Возьмём $`n`$ потоков. Создадим массив $`r`$ длинны $`n+1`$. Инициализируем все ячейки нулём, кроме нулевой - её единичкой. Каждый поток $`i`$ (нумерация с 1) при вызове `Dicide` делает `Mem-Swap(r[0], r[i])`. Идея в том, что первый поток, что вызовет `Dicide`, заберёт единичку из нулевого регистра и запишет туда ноль, а остальные будут менять местами нули. Единичка будет записана в регистре победителя. Поток может определить победителя, пройдясь по всем регистрам. Таким образом, Memory-to-Memory Swap имеет $`ConsensusNumber=\infty`$.

Все потоки выводят номер первого потока, что захватил флаг, поэтому реализация соответствует свойствам `agreement` (победитель - один) и `valility` Наш алгопитм работает за константное время и заканчивается вне зависимости от результата исполнения другого потока, поэтому свойство `wait-free termination` тоже выполнено.
